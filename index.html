<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACC Professional Telemetry Analysis & Setup Optimization</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <h1>ACC Professional Telemetry Analysis</h1>
                <p class="app-subtitle">Advanced Racing Engineering Tool with USOS Analysis</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Car Selection Section -->
            <section class="card">
                <div class="card__header">
                    <h2>1. Car Selection & Current Setup</h2>
                </div>
                <div class="card__body">
                    <div class="form-group">
                        <label for="carSelect" class="form-label">Select ACC Car Model</label>
                        <select id="carSelect" class="form-control">
                            <option value="">Choose a car...</option>
                        </select>
                    </div>
                    <div id="carInfo" class="car-info hidden">
                        <div class="car-details-grid">
                            <div class="car-detail">
                                <span class="detail-label">Model Year:</span>
                                <span id="carYear" class="detail-value"></span>
                            </div>
                            <div class="car-detail">
                                <span class="detail-label">Class:</span>
                                <span id="carClass" class="detail-value"></span>
                            </div>
                            <div class="car-detail">
                                <span class="detail-label">Wheelbase:</span>
                                <span id="carWheelbase" class="detail-value"></span>
                            </div>
                        </div>
                        <div class="current-setup-preview">
                            <h4>Current Setup Parameters</h4>
                            <div id="currentSetupDisplay" class="setup-preview-grid"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Telemetry Upload Section -->
            <section class="card">
                <div class="card__header">
                    <h2>2. Telemetry Data Upload</h2>
                </div>
                <div class="card__body">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <div class="upload-icon">üìä</div>
                            <p>Upload ACC telemetry CSV with comprehensive data channels</p>
                            <p class="upload-hint">Required: SPEED, STEERANGLE, G_LAT, ROTY, THROTTLE, BRAKE<br>
                            Optional: WHEEL_SPEED_FL/FR/RL/RR for advanced analysis</p>
                            <button class="btn btn--secondary" onclick="document.getElementById('fileInput').click()">Browse Files</button>
                            <input type="file" id="fileInput" accept=".csv" class="hidden">
                        </div>
                    </div>
                    <div class="upload-actions">
                        <button id="loadSampleBtn" class="btn btn--outline">Load Professional Sample</button>
                        <button id="processDataBtn" class="btn btn--primary hidden">Analyze Telemetry</button>
                    </div>
                    <div id="dataValidation" class="data-validation hidden">
                        <h4>Data Validation</h4>
                        <div id="validationResults"></div>
                    </div>
                </div>
            </section>

            <!-- Advanced Analysis Results Section -->
            <section id="analysisSection" class="card hidden">
                <div class="card__header">
                    <h2>3. Professional Analysis Results</h2>
                </div>
                <div class="card__body">
                    <div class="analysis-tabs">
                        <button class="tab-btn active" data-tab="overview">USOS Overview</button>
                        <button class="tab-btn" data-tab="telemetry">Telemetry Charts</button>
                        <button class="tab-btn" data-tab="corners">Corner Analysis</button>
                        <button class="tab-btn" data-tab="wheel-slip">Wheel Slip</button>
                        <button class="tab-btn" data-tab="yaw-analysis">Yaw Response</button>
                    </div>
                    
                    <!-- USOS Overview Tab -->
                    <div id="overview" class="tab-content active">
                        <div class="metrics-grid">
                            <div class="metric-card usos-card">
                                <h4>USOS Factor</h4>
                                <div class="metric-value" id="usosValue">-</div>
                                <div class="metric-unit">weighted</div>
                                <div class="metric-confidence">Confidence: <span id="usosConfidence">-</span>%</div>
                            </div>
                            <div class="metric-card balance-card">
                                <h4>Balance Distribution</h4>
                                <div class="metric-value" id="balanceDistribution">-</div>
                                <div class="metric-unit">US/N/OS %</div>
                                <div class="balance-indicator" id="balanceIndicator"></div>
                            </div>
                            <div class="metric-card yaw-card">
                                <h4>Yaw Response</h4>
                                <div class="metric-value" id="yawResponse">-</div>
                                <div class="metric-unit">deficit avg</div>
                                <div class="metric-confidence">Peak Lateral: <span id="peakLateral">-</span>g</div>
                            </div>
                            <div class="metric-card slip-card">
                                <h4>Traction Loss</h4>
                                <div class="metric-value" id="tractionLoss">-</div>
                                <div class="metric-unit">% of corners</div>
                                <div class="metric-confidence">Avg Slip: <span id="avgSlip">-</span>%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Telemetry Charts Tab -->
                    <div id="telemetry" class="tab-content">
                        <div class="chart-grid">
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <h4>USOS Heat Map</h4>
                                <canvas id="usosChart"></canvas>
                            </div>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <h4>Vehicle Dynamics</h4>
                                <canvas id="dynamicsChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Corner Analysis Tab -->
                    <div id="corners" class="tab-content">
                        <div class="corner-analysis-header">
                            <h4>Corner-by-Corner Phase Analysis</h4>
                            <div class="phase-legend">
                                <span class="phase-entry">Entry</span>
                                <span class="phase-apex">Apex</span>
                                <span class="phase-exit">Exit</span>
                            </div>
                        </div>
                        <div id="cornersTable" class="corners-table"></div>
                    </div>

                    <!-- Wheel Slip Tab -->
                    <div id="wheel-slip" class="tab-content">
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <h4>Wheel Slip Ratio Analysis</h4>
                            <canvas id="wheelSlipChart"></canvas>
                        </div>
                        <div class="slip-summary" id="slipSummary"></div>
                    </div>

                    <!-- Yaw Analysis Tab -->
                    <div id="yaw-analysis" class="tab-content">
                        <div class="chart-container" style="position: relative; height: 400px;">
                            <h4>Expected vs Actual Yaw Rate</h4>
                            <canvas id="yawChart"></canvas>
                        </div>
                        <div class="yaw-insights" id="yawInsights"></div>
                    </div>
                </div>
            </section>

            <!-- Intelligent Setup Recommendations Section -->
            <section id="recommendationsSection" class="card hidden">
                <div class="card__header">
                    <h2>4. Intelligent Setup Recommendations (8 Groups)</h2>
                    <p class="recommendations-subtitle">Parameter limit checking ‚Ä¢ Confidence ratings ‚Ä¢ Multiple alternatives per group</p>
                </div>
                <div class="card__body">
                    <div class="recommendations-grid">
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üèÅ</span> Aerodynamics</h4>
                            <div id="aeroRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üîß</span> Suspension & ARBs</h4>
                            <div id="suspensionRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">‚ö°</span> Electronics</h4>
                            <div id="electronicsRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üèéÔ∏è</span> Tire Management</h4>
                            <div id="tiresRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üìê</span> Alignment</h4>
                            <div id="alignmentRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üî©</span> Dampers</h4>
                            <div id="dampersRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">‚öôÔ∏è</span> Differential</h4>
                            <div id="differentialRecommendations" class="recommendations-list"></div>
                        </div>
                        <div class="recommendation-group">
                            <h4><span class="group-icon">üõë</span> Brake System</h4>
                            <div id="brakesRecommendations" class="recommendations-list"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Interactive Setup Tuning Section -->
            <section id="setupSection" class="card hidden">
                <div class="card__header">
                    <h2>5. Interactive Setup Tuning with Live Validation</h2>
                </div>
                <div class="card__body">
                    <div class="setup-tabs">
                        <button class="setup-tab-btn active" data-tab="aero">Aerodynamics</button>
                        <button class="setup-tab-btn" data-tab="suspension">Suspension</button>
                        <button class="setup-tab-btn" data-tab="electronics">Electronics</button>
                        <button class="setup-tab-btn" data-tab="tires">Tires</button>
                        <button class="setup-tab-btn" data-tab="alignment">Alignment</button>
                        <button class="setup-tab-btn" data-tab="dampers">Dampers</button>
                    </div>

                    <!-- Aero Setup -->
                    <div id="aero" class="setup-tab-content active">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>Front Splitter</label>
                                <div class="control-wrapper">
                                    <input type="range" id="splitter" class="setup-slider" min="0" max="5" step="1" value="2">
                                    <span class="control-value" id="splitterValue">2</span>
                                    <span class="control-limits" id="splitterLimits">0-5</span>
                                </div>
                                <div class="impact-preview" id="splitterImpact"></div>
                            </div>
                            <div class="control-group">
                                <label>Rear Wing</label>
                                <div class="control-wrapper">
                                    <input type="range" id="wing" class="setup-slider" min="0" max="12" step="1" value="6">
                                    <span class="control-value" id="wingValue">6</span>
                                    <span class="control-limits" id="wingLimits">0-12</span>
                                </div>
                                <div class="impact-preview" id="wingImpact"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Other setup tabs with similar structure -->
                    <div id="suspension" class="setup-tab-content">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>Front ARB</label>
                                <div class="control-wrapper">
                                    <input type="range" id="ARBFront" class="setup-slider" min="0" max="30" step="1" value="15">
                                    <span class="control-value" id="ARBFrontValue">15</span>
                                    <span class="control-limits" id="ARBFrontLimits">0-30</span>
                                </div>
                                <div class="impact-preview" id="ARBFrontImpact"></div>
                            </div>
                            <div class="control-group">
                                <label>Rear ARB</label>
                                <div class="control-wrapper">
                                    <input type="range" id="ARBRear" class="setup-slider" min="0" max="30" step="1" value="18">
                                    <span class="control-value" id="ARBRearValue">18</span>
                                    <span class="control-limits" id="ARBRearLimits">0-30</span>
                                </div>
                                <div class="impact-preview" id="ARBRearImpact"></div>
                            </div>
                        </div>
                    </div>

                    <div id="electronics" class="setup-tab-content">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>TC1</label>
                                <div class="control-wrapper">
                                    <input type="range" id="tC1" class="setup-slider" min="0" max="11" step="1" value="4">
                                    <span class="control-value" id="tC1Value">4</span>
                                    <span class="control-limits" id="tC1Limits">0-11</span>
                                </div>
                                <div class="impact-preview" id="tC1Impact"></div>
                            </div>
                            <div class="control-group">
                                <label>TC2</label>
                                <div class="control-wrapper">
                                    <input type="range" id="tC2" class="setup-slider" min="0" max="20" step="1" value="6">
                                    <span class="control-value" id="tC2Value">6</span>
                                    <span class="control-limits" id="tC2Limits">0-20</span>
                                </div>
                                <div class="impact-preview" id="tC2Impact"></div>
                            </div>
                            <div class="control-group">
                                <label>ABS</label>
                                <div class="control-wrapper">
                                    <input type="range" id="abs" class="setup-slider" min="1" max="11" step="1" value="3">
                                    <span class="control-value" id="absValue">3</span>
                                    <span class="control-limits" id="absLimits">1-11</span>
                                </div>
                                <div class="impact-preview" id="absImpact"></div>
                            </div>
                        </div>
                    </div>

                    <div id="tires" class="setup-tab-content">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>Front Left Pressure</label>
                                <div class="control-wrapper">
                                    <input type="range" id="pressureLF" class="setup-slider" min="24.0" max="32.0" step="0.1" value="27.5">
                                    <span class="control-value" id="pressureLFValue">27.5</span>
                                    <span class="control-limits" id="pressureLFLimits">24-32</span>
                                </div>
                                <div class="impact-preview" id="pressureLFImpact"></div>
                            </div>
                            <div class="control-group">
                                <label>Front Right Pressure</label>
                                <div class="control-wrapper">
                                    <input type="range" id="pressureRF" class="setup-slider" min="24.0" max="32.0" step="0.1" value="27.5">
                                    <span class="control-value" id="pressureRFValue">27.5</span>
                                    <span class="control-limits" id="pressureRFLimits">24-32</span>
                                </div>
                                <div class="impact-preview" id="pressureRFImpact"></div>
                            </div>
                        </div>
                    </div>

                    <div id="alignment" class="setup-tab-content">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>Front Camber</label>
                                <div class="control-wrapper">
                                    <input type="range" id="camberFront" class="setup-slider" min="-4.0" max="-1.0" step="0.1" value="-2.8">
                                    <span class="control-value" id="camberFrontValue">-2.8</span>
                                    <span class="control-limits" id="camberFrontLimits">-4.0 to -1.0</span>
                                </div>
                                <div class="impact-preview" id="camberFrontImpact"></div>
                            </div>
                        </div>
                    </div>

                    <div id="dampers" class="setup-tab-content">
                        <div class="setup-controls">
                            <div class="control-group">
                                <label>Front Bump Slow</label>
                                <div class="control-wrapper">
                                    <input type="range" id="bumpSlow" class="setup-slider" min="5" max="40" step="1" value="20">
                                    <span class="control-value" id="bumpSlowValue">20</span>
                                    <span class="control-limits" id="bumpSlowLimits">5-40</span>
                                </div>
                                <div class="impact-preview" id="bumpSlowImpact"></div>
                            </div>
                        </div>
                    </div>

                    <div class="setup-actions">
                        <button id="resetSetupBtn" class="btn btn--outline">Reset to Default</button>
                        <button id="applyRecommendationsBtn" class="btn btn--secondary">Apply Top Recommendations</button>
                        <button id="exportSetupBtn" class="btn btn--primary">Export Professional Setup</button>
                    </div>
                </div>
            </section>

            <!-- Analysis Report Section -->
            <section id="reportSection" class="card hidden">
                <div class="card__header">
                    <h2>6. Professional Analysis Report</h2>
                </div>
                <div class="card__body">
                    <div class="report-content">
                        <div class="report-summary" id="reportSummary"></div>
                        <div class="confidence-metrics" id="confidenceMetrics"></div>
                        <div class="improvement-predictions" id="improvementPredictions"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>